<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather</title>
    <!-- bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- font-awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
        integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- favicon -->
    <link rel="icon" type="image/x-icon" href="https://cdn-icons-png.flaticon.com/512/9098/9098495.png">
</head>

<body
    style="background-image: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRPnX-MW9LRkk75lcRBw8Ub-Mp3_yWLlaheOA&s');background-repeat: no-repeat;background-size: cover;">
    <div class="row">
        <div class="col-md-4"></div>
        <div class="col-md-4">
            <div class="d-flex mt-5">
                <input id="weather" type="text" placeholder="Search Location..." class="form-control">
                <button class="btn btn-success ms-3" onclick="search()">Search</button>
            </div>
            <div class="w-100 py-4 px-5" id="result">
            </div>
        </div>
        <div class="col-md-4"></div>
    </div>
</body>
<script>
    const search = async () => {
        console.log(weather.value);
        if (weather.value) {
           const response= await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${weather.value}&appid=5fe36b192ffd1c36dffb6752bc1722b2`)
           console.log(response);
           response.json().then((data)=>{
            console.log(data);
            //humidity
            const humidity = data.main.humidity
            console.log(humidity);
            //main
            const main = data.weather[0].main;
            console.log(main);
            //wind speed
            const windspeed = (data.wind.speed * 3.6).toFixed(2); 
            console.log(windspeed);
            //pressure
            const pressure = data.main.pressure; 
            console.log(pressure);
            //fills like
            const feelslike = (data.main.feels_like - 273.15).toFixed(2);
            console.log(feelslike);
            //place name
            const cname = data.name;
            console.log(cname);
            //country name
            const country = data.sys.country;
            console.log(country);
            //time
            const timezone = data.timezone;
            console.log(timezone);
            //temp
            const temp = (data.main.temp - 273.15).toFixed(2);
            console.log(temp);
            //date
            let date = Date();
            console.log(date)
            let weather_img = '';
            let background_img = '';

            if(temp > 35){
                weather_img ='./images/cloudicon.png';
                background_img = 'url(./images/backcloud.jpg)';
            }
            else if(temp > 30){
                weather_img = './images/rainicon.png';
                background_img = 'url(./images/backrain.jpg)';
            }
            else if(temp > 20){
                weather_img = './images/Drizzleicon.png';
                background_img = 'url(./images/backDrizzle.jpg)';
            }
            else if(temp > 10){
                weather_img = './images/Misticon.png';
                background_img = './images/backmint.jpg';
            }
            else if(temp > 0){
                weather_img = './images/Fog.png';
                background_img = './images/backfog.jpg';
            }
            else{
                weather_img = './images/nomal.jpg';
                background_img = './images/backnormal.jpg';
            }

            result.innerHTML=`<div class="card mt-5" style="width: 100%;outline: none;">
                <div class="mb-4 d-flex align-items-center justify-content-center mt-5">
                <img src="${weather_img}" alt="Weather Icon" class="img-fluid"  style="width: 120px;">
            </div>
            <h2 class="ms-3">${cname} , ${country}</h2>
            <h4 class="ms-3">${temp}°c</h4>
            <p class="ms-3">${main}</p>
            <p class="ms-3">${date}
                        </p>
                    <ul>
                        <li class="list-group-item mt-3">Time Zone : ${timezone}</li>
                        <li class="list-group-item mt-3">${humidity}%<br>Humidity</li>
                        <li class="list-group-item mt-3">${windspeed}Km/h<br>Wind Speed</li>
                        <li class="list-group-item mt-3">${pressure}%<br>Pressure</li>
                        <li class="list-group-item mt-3">${feelslike}°C<br>Feels Like</li>
                    </ul>
                </div>`
           })
        }
        else {
            alert('please enter the place name')
        }
    }
</script>
<!-- 1:17:18 -->
</html>